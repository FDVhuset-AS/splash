"use strict";var x=Object.defineProperty;var f=(e,t,s)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var i=(e,t,s)=>(f(e,typeof t!="symbol"?t+"":t,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class g{constructor(){i(this,"_items");this._items=[]}get items(){return this._items}push(t){this.items.push(t)}pop(){return this.items.pop()}peek(){return this.items[this.size()-1]}isEmpty(){return this.size()===0}size(){return this.items.length}clear(){this._items=[]}}function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}class d{constructor(){i(this,"id");i(this,"element");this.element=N(),this.element.id=this.id=S()}getNSContentElement(){return this.getNSElement().firstElementChild}getNSTextElement(){return this.getNSContentElement().firstElementChild}getId(){return this.id}getNSElement(){return this.element}setText(t){return this.getNSTextElement().innerText=t,t.length>0?this.showText():this.hideText(),this}showText(){return w(this.getNSTextElement()),this}hideText(){return E(this.getNSTextElement()),this}remove(){var t;return this.element&&((t=this.element.parentElement)==null||t.removeChild(this.element),delete this.element),this}}i(d,"NSClass","ns"),i(d,"NSHostClass","nsh");function N(){return new DOMParser().parseFromString('<div class=ns><div class=nsc><div class=nst></div><div class=nss><svg viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none></circle></svg></div></div></div>',"text/html").body.firstChild}function p(e,t){t.children.length>0?t.insertBefore(e,t.children.item(0)):t.append(e)}function o(e,t){e==null||e.classList[t](d.NSHostClass)}function v(e){o(e.getNSElement().parentElement,"remove")}function w(e){e.style.display="flex"}function E(e){e.style.display="none"}function a(e){return e instanceof Element?e:document.querySelector(e||"")}function y(e){var t;return((t=e==null?void 0:e.classList)==null?void 0:t.contains(d.NSClass))??!1}function h(e,t){o(e.parentElement,"remove"),o(t,"add"),p(e,t)}function u(e){const t=e.firstElementChild;if(t!==null&&y(t)){const c=t.id;return l.getInstance().nsStack.items.find(m=>m.getId()===c)??null}return null}const n=class{constructor(){i(this,"nsStack");this.nsStack=new g}findIndex(t){return this.nsStack.items.findIndex(t)}find(t){return this.nsStack.items.find(t)}static getInstance(){return n.instance||(n.instance=new n),n.instance}static assignToWindow(){Object.defineProperty(window,n.WindowAccessorKey,{value:n.getInstance(),writable:!1})}static start(){n.assignToWindow(),window.addEventListener("load",()=>{window[n.WindowAccessorKey]instanceof n||n.assignToWindow()})}createNS(t){const s=new d;return s.setText(t||""),this.nsStack.push(s),s}cleanAndRemove(t){return v(t),t.remove().getId()}stackDelete(t){let s=this.findIndex(r=>r.getId()===t.getId());return s<0?null:(this.nsStack.items.splice(s,1),t.getId())}deleteNS(t){const s=this.find(t);return s?(this.cleanAndRemove(s),this.stackDelete(s)):null}show(t){let s=u(document.body);return s||(s=this.createNS(),h(s.getNSElement(),document.body)),s.setText(t||"").getId()}showInside(t,s){const r=a(t);if(r){let c=u(r);return c||(c=this.createNS()),h(c.getNSElement(),r),c.setText(s||"").getId()}return null}hide(){const t=this.nsStack.pop();return t?this.cleanAndRemove(t):null}hideAll(){this.nsStack.items.forEach(t=>{this.cleanAndRemove(t)}),this.nsStack.clear()}hideId(t){return this.deleteNS(s=>s.getId()===t)}hideInside(t){const s=a(t),r=c=>c.getNSElement().parentElement===s;return s?this.deleteNS(r):null}};let l=n;i(l,"WindowAccessorKey","ns"),i(l,"instance");exports.Service=l;
