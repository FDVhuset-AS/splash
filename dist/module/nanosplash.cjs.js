var t=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,r=(s,i,e)=>i in s?t(s,i,{t:!0,i:!0,writable:!0,value:e}):s[i]=e;Object.defineProperties(exports,{h:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=t=>document.createElement(t);function c(t,...s){t.classList.add(...s)}function a(t,s,i){t.setAttribute(s,i)}class l{static o(t){if("string"==typeof t){const i=(s=t,document.querySelector(s));if(!i)throw new Error(`No match with ${t}`);return i}if(t instanceof Node)return t;var s;throw new Error("Destination argument must string or Node")}static l(t){const o={getId:()=>t.getId(),remove:()=>t.delete(),moveTo:s=>t.moveTo(s),getText:()=>t.getText(),setText:s=>t.setText(s),getImgSrc:()=>t.getImgSrc(),setImgSrc:s=>t.setImgSrc(s)};return c=((t,s)=>{for(var i in s||(s={}))n.call(s,i)&&r(t,i,s[i]);if(e)for(var i of e(s))h.call(s,i)&&r(t,i,s[i]);return t})({},o),s(c,i({inside:s=>(t.moveTo(s),o)}));var c}static u(){const t=o("div");return c(t,"ns-spinner"),t.innerHTML='\n            <svg viewBox="0 0 50 50">\n                <circle class="path" cx="25" cy="25" r="20" fill="none"></circle>\n            </svg>\n        ',t}}class u{constructor(t,s,i){var e;this.m=o("div"),this.v=o("div"),this.g=o("div"),this.p=l.u(),this.S=o("div"),this.I=o("div"),this.O=o("div"),this.N=o("img"),this.id=Math.random().toString(36).substring(2),this.j=t,this.v.innerText=s,this.A=i,this.N.src=null!=(e=this.A)?e:"",this.N.alt=m.T,this.m.style.fontSize=t.fontSize,this.p.style.display=t.D?"flex":"none",this.F(),this.setImgSrc(i)}M(){c(this.O,"ns-container"),c(this.I,"ns-blur"),c(this.N,"ns-img"),c(this.v,"ns-text"),c(this.g,"ns-text-container"),c(this.p,"ns-spinner"),c(this.S,"ns","ns-window"),c(this.m,"ns-wrapper")}C(){this.g.append(this.v,this.p),this.O.append(this.N,this.g),this.S.append(this.O),this.m.append(this.I,this.S)}F(){this.m.id=this.getId(),a(this.m,"data-ctx","nanosplash"),this.C(),this.M()}getId(){return this.id}getText(){return this.v.innerText}setText(t){return this.v.innerText=t,this}getImgSrc(){return this.A}setImgSrc(t){return this.N.src=null!=t?t:"",this.N.style.display=t?"block":"none",this.C(),this}W(){return this.k}R(){const t=this.m.parentElement;t&&this.$(t)}_(){a(this.m,"style",""),this.m.classList.remove("ns-fs")}B(t){const s=t.parentNode;s&&(this.$(s),s.replaceChild(this.m,t),this.I.appendChild(t))}H(){this.m.classList.add("ns-fs"),((t,s,i=!1)=>{t&&s&&(s.hasChildNodes()&&i?s.insertBefore(t,s.firstChild):s.appendChild(t))})(this.m,document.body,!0)}P(t){this.j.q(t).filter((t=>t.getId()!==this.getId())).forEach((t=>t.delete()))}moveTo(t){this.R(),this.k=l.o(t),this.P(this.k),this.k===document.body?this.H():(this._(),this.B(this.k)),this.F()}G(t){Array.from(this.I.childNodes).forEach(t)}$(t){this.G((s=>t.insertBefore(s,this.m)))}J(){[this.v,this.p,this.g,this.N,this.O,this.I,this.S,this.m].forEach((t=>t.remove()))}delete(){this.R(),this.J(),this.j.delete(this)}}class d{static K(t,s,i,e){var n;return t||(t=new u(s,i,e)),t.setText(i).setImgSrc(null!=(n=t.getImgSrc())?n:e)}static L(t,s){return i=>(s=d.K(s,t,i),t.U.set(s.getId(),s),s.moveTo(document.body),l.l(s))}static V(t,s){return(...i)=>((s=d.K(s,t,"")).moveTo(document.body),(async()=>{for(const[t,[e,n]]of i.entries())s.setText(n),await e;s.delete()})(),l.l(s))}static X(t,s){return i=>(s=d.K(s,t,""),{show:e=>(t.U.set(s.getId(),s),s.moveTo(document.body),s.setText(e),i.finally((()=>s.delete())),l.l(s))})}}class m{constructor(t){var s,i,e;this.A=null!=(s=null==t?void 0:t.A)?s:void 0,this.D=null!=(i=null==t?void 0:t.Y)&&i,this.fontSize=null!=(e=null==t?void 0:t.fontSize)?e:"18px",this.U=new Map}show(t){return d.L(this,new u(this,t,this.A))(t)}progress(...t){return d.V(this,new u(this,"",this.A))(...t)}while(t){return d.X(this,new u(this,"",this.A))(t)}Z(t){const s=this.U.size,i=Array.from(this.U.values());for(let e=s-1;e>=0;e--){console.log({size:s,tt:s-1,st:e});const n=i[e];if(!t(n.getId(),n,e))break}}delete(t){this.U.delete(t.getId())}hideAll(){this.U.forEach((t=>t.delete()))}hide(t){if(t){const s=this.U.get(t);if(!s)throw new Error(`Could not find element with id: ${t}`);s.delete()}else{const t=this.U.size;this.Z(((s,i,e)=>{const n=e===t-1;return n&&i.delete(),n}))}}q(t){return Array.from(this.U.values()).filter((s=>s.W()===t))}}m.T="Nanosplash",exports.Nanosplash=m;
