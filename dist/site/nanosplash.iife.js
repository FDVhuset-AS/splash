!function(){"use strict";class t extends Error{constructor(t){super(t)}getName(){return this.constructor.name}}class e extends t{constructor(t){super(t)}}const s=(t,e)=>{var s;const i=document.createElement(t);return e&&(i.id||(i.id=e.id+""),i.className||(i.className=e.className+""),null==(s=e.attributes)||s.filter((t=>t.value)).forEach((({key:t,value:e})=>o(i,t,e))),e.content&&("string"==typeof e.content?i.innerText=e.content:i.append(e.content))),i},i=(t,e)=>{t.hidden=!e,e?h(t,"hidden"):o(t,"hidden","true")},n=t=>({to:(e,s)=>{const i=Array.from(e.childNodes);if(i.length<1||!s)return void e.appendChild(t);const n=i[0];e.insertBefore(t,n)}}),l=t=>{const e=t.parentNode;e&&(s=>{const i="px",{pageYOffset:n,pageXOffset:l}=window;let o,h;e===document.body?(o=n+i,h="100vh"):(o=s.y+n+i,h=s.height+i),a(t,"top",o),a(t,"left",s.x+l+i),a(t,"width",s.width+i),a(t,"height",h)})(e.getBoundingClientRect())},a=(t,e,s)=>{t.style[e]=s},o=(t,e,s)=>{t.setAttribute(e,s)},h=(t,e)=>{t.removeAttribute(e)};class r{static makeMainElement(){const t=s("div",{className:"nanosplash-container",attributes:[{key:"data-splash-animation",value:this.DEFAULT.SPLASH_ANIMATION}]});return t.style.backgroundColor=this.DEFAULT.BACKGROUND_COLOR,t}static makeSplashElement(){const t=s("img",{className:"nanosplash-img",attributes:[{key:"src",value:this.DEFAULT.SPLASH_SOURCE},{key:"alt",value:"Nanosplash indicator"}]});return i(t,!1),t}static makeTextElement(){return s("div",{className:"nanosplash-text",content:this.DEFAULT.TEXT})}}r.DEFAULT={DESTINATION_NODE:document.body,TEXT:"Loading ...",TEXT_FONT:'"Arial", sans-serif',TEXT_WEIGHT:"medium",TEXT_COLOR:"#555",TEXT_SIZE:"26px",SPLASH_SOURCE:"favicon.svg",SPLASH_WIDTH:"100px",SPLASH_HEIGHT:"auto",SPLASH_ANIMATION:"pulse",BACKGROUND_COLOR:"rgba(255, 255, 255, 0.90)",BACKGROUND_BLUR:"light"};class m{constructor(t){this.defaultText=r.DEFAULT.TEXT,this.defaultDestination=r.DEFAULT.DESTINATION_NODE,this.mainElement=r.makeMainElement(),this.splashElement=r.makeSplashElement(),this.textElement=r.makeTextElement(),n(this.splashElement).to(this.mainElement),n(this.textElement).to(this.mainElement),n(this.mainElement).to(this.defaultDestination,!0),i(this.mainElement,!1),l(this.mainElement),this.setDefaultStyles(),t&&this.configure(t)}install(){var t,e,s;Object.defineProperty(window,"loading",{value:this,writable:!1}),t=window,e=()=>l(this.mainElement),s=["resize","scroll"],(([t,i])=>{s.forEach((s=>{t?t(`on${s}`,e):i(s,e,!0)}))})([t.attachEvent,t.addEventListener])}configure(t){var e,s,n,l,a,o,h,r,d,u,E,c;return(null==(e=null==t?void 0:t.default)?void 0:e.destination)&&(this.defaultDestination=m.getDestinationElement(t.default.destination)),this.defaultText||(this.defaultText=null==(s=t.default)?void 0:s.text),(null==(n=t.text)?void 0:n.family)&&this.setTextFontFamily(t.text.family),(null==(l=t.text)?void 0:l.weight)&&this.setTextWeight(t.text.weight),(null==(a=t.text)?void 0:a.color)&&this.setTextColor(t.text.color),(null==(o=t.text)?void 0:o.size)&&this.setTextSize(t.text.size),(null==(h=t.background)?void 0:h.color)&&this.setBackgroundColor(t.background.color),(null==(r=t.background)?void 0:r.blur)&&this.setBackgroundBlur(t.background.blur),t.splash?((null==(d=t.splash)?void 0:d.src)&&this.setSplashSource(t.splash.src),(null==(u=t.splash)?void 0:u.width)&&this.setSplashWidth(t.splash.width),(null==(E=t.splash)?void 0:E.height)&&this.setSplashHeight(t.splash.height),(null==(c=t.splash)?void 0:c.animation)&&this.setSplashAnimation(t.splash.animation)):i(this.splashElement,!1),this}show(t,e){this.setText(null!=t?t:r.DEFAULT.TEXT),i(this.mainElement,!0);const s=this.mainElement.parentNode;return s&&s!==document.body&&l(this.mainElement),(null==e?void 0:e.then)&&e.then(this.hide),{inside:t=>{const e=m.getDestinationElement(t);n(this.mainElement).to(e,!0),l(this.mainElement)}}}hide(){i(this.mainElement,!1),this.setText(this.defaultText),n(this.mainElement).to(this.defaultDestination,!0),l(this.mainElement)}setDefaultStyles(){this.setTextFontFamily(r.DEFAULT.TEXT_FONT),this.setTextWeight(r.DEFAULT.TEXT_WEIGHT),this.setTextColor(r.DEFAULT.TEXT_COLOR),this.setTextSize(r.DEFAULT.TEXT_SIZE),this.setSplashSource(r.DEFAULT.SPLASH_SOURCE),this.setSplashWidth(r.DEFAULT.SPLASH_WIDTH),this.setSplashHeight(r.DEFAULT.SPLASH_HEIGHT),this.setSplashAnimation(r.DEFAULT.SPLASH_ANIMATION),this.setBackgroundColor(r.DEFAULT.BACKGROUND_COLOR),this.setBackgroundBlur(r.DEFAULT.BACKGROUND_BLUR)}setText(t){this.textElement.innerText=t}setTextFontFamily(t){a(this.textElement,"fontFamily",t)}setTextWeight(t){a(this.textElement,"fontWeight",t)}setTextColor(t){a(this.textElement,"color",t)}setTextSize(t){a(this.textElement,"fontSize",t)}setSplashSource(t){this.splashElement.src=t,i(this.splashElement,!0)}setSplashWidth(t){a(this.splashElement,"width",t)}setSplashHeight(t){a(this.splashElement,"height",t)}setSplashAnimation(t){o(this.mainElement,"data-splash-animation",t)}setBackgroundColor(t){a(this.mainElement,"backgroundColor",t)}setBackgroundBlur(t){o(this.mainElement,"data-blur",t)}static getDestinationElement(t){const s="string"==typeof t,i=(n=t)&&"[object Function]"==={}.toString.call(n);var n;const l=(t=>t instanceof Element||t instanceof Node)(t);let a;if(s)o=t,a=document.querySelector(o);else if(i)a=t();else{if(!l)throw new e;a=t}var o;return a}}window&&window instanceof Window&&(new m).install()}();
