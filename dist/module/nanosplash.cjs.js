var t=Object.defineProperty,s=Object.defineProperties,e=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,h=(s,e,i)=>e in s?t(s,e,{t:!0,i:!0,writable:!0,value:i}):s[e]=i;Object.defineProperties(exports,{h:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=t=>document.createElement(t);function a(t,...s){t.classList.add(...s)}function c(t,s,e){t.setAttribute(s,e)}class u{static o(t){if("string"==typeof t){const e=(s=t,document.querySelector(s));if(!e)throw new Error(`No match with ${t}`);return e}if(t instanceof Node)return t;var s;throw new Error("Destination argument must string or Node")}static u(t){const o={getId:()=>t.getId(),remove:()=>t.delete(),moveTo:s=>t.moveTo(s),getText:()=>t.getText(),setText:s=>t.setText(s),getImgSrc:()=>t.getImgSrc(),setImgSrc:s=>t.setImgSrc(s)};return a=((t,s)=>{for(var e in s||(s={}))r.call(s,e)&&h(t,e,s[e]);if(i)for(var e of i(s))n.call(s,e)&&h(t,e,s[e]);return t})({},o),s(a,e({inside:s=>(t.moveTo(s),o)}));var a}}class l{constructor(t,s,e){var i;this.l=o("div"),this.m=o("div"),this.g=o("div"),this.v=o("div"),this.p=o("div"),this.S=o("img"),this.id=Math.random().toString(36).substring(2),this.I=t,this.m.innerText=s,this.O=e,this.S.src=null!=(i=this.O)?i:"",this.S.alt=m.j,this.N(),this.setImgSrc(e)}F(){a(this.p,"ns-container"),a(this.v,"ns-blur"),a(this.S,"ns-img"),a(this.m,"ns-text"),a(this.g,"ns","ns-window"),a(this.l,"ns-wrapper")}T(){this.p.append(this.S,this.m),this.g.append(this.p),this.l.append(this.v,this.g)}N(){this.l.id=this.getId(),c(this.l,"data-ctx","nanosplash"),this.T(),this.F()}getId(){return this.id}getText(){return this.m.innerText}setText(t){return this.m.innerText=t,this}getImgSrc(){return this.O}setImgSrc(t){return this.S.src=null!=t?t:"",this.S.style.display=t?"block":"none",this.T(),this}A(){return this.D}M(){const t=this.l.parentElement;t&&this.C(t)}W(){c(this.l,"style",""),this.l.classList.remove("ns-fs")}k(t){const s=t.parentNode;s&&(this.C(s),s.replaceChild(this.l,t),this.v.appendChild(t))}R(){this.l.classList.add("ns-fs"),((t,s,e=!1)=>{t&&s&&(s.hasChildNodes()&&e?s.insertBefore(t,s.firstChild):s.appendChild(t))})(this.l,document.body,!0)}$(t){this.I._(t).filter((t=>t.getId()!==this.getId())).forEach((t=>t.delete()))}moveTo(t){this.M(),this.D=u.o(t),this.$(this.D),this.D===document.body?this.R():(this.W(),this.k(this.D)),this.N()}H(t){Array.from(this.v.childNodes).forEach(t)}C(t){this.H((s=>t.insertBefore(s,this.l)))}P(){[this.m,this.S,this.p,this.v,this.g,this.l].forEach((t=>t.remove()))}delete(){this.M(),this.P(),this.I.delete(this)}}class d{static q(t,s,e,i){var r;return t||(t=new l(s,e,i)),t.setText(e).setImgSrc(null!=(r=t.getImgSrc())?r:i)}static B(t,s){return e=>(s=d.q(s,t,"",e),{show:d.G(t,s),progress:d.J(t,s),while:d.K(t,s)})}static G(t,s){return e=>(s=d.q(s,t,e),t.L.set(s.getId(),s),s.moveTo(document.body),u.u(s))}static J(t,s){return(...e)=>((s=d.q(s,t,"")).moveTo(document.body),(async()=>{for(const[t,[i,r]]of e.entries())s.setText(r),await i;s.delete()})(),u.u(s))}static K(t,s){return e=>(s=d.q(s,t,""),{show:i=>(t.L.set(s.getId(),s),s.moveTo(document.body),s.setText(i),e.finally((()=>s.delete())),u.u(s))})}}class m{constructor(){this.L=new Map}img(t){return d.B(this,new l(this,"",t))(t)}show(t){return d.G(this,new l(this,t))(t)}progress(...t){return d.J(this,new l(this,""))(...t)}while(t){return d.K(this,new l(this,""))(t)}U(t){let s=0;const e=this.L.entries();for(const[i,r]of e)if(!t(i,r,s++))break}delete(t){this.L.delete(t.getId())}hideAll(){this.L.forEach((t=>t.delete()))}hide(t){if(t){const s=this.L.get(t);if(!s)throw new Error(`Could not find element with id: ${t}`);s.delete()}else this.U(((t,s,e)=>{const i=0===e;return i&&s.delete(),i}))}_(t){return Array.from(this.L.values()).filter((s=>s.A()===t))}}m.j="Nanosplash",exports.Nanosplash=m;
